# uLogin  

Donate link: http://ulogin.ru  
Tags: ulogin, login, social, authorization  
Requires at least: 3.x.x  
Tested up to: 4.2.3  
Stable tag: 1.9  
License: GNU General Public License, version 2  

**uLogin** — это инструмент, который позволяет пользователям получить единый доступ к различным Интернет-сервисам без необходимости повторной регистрации,
а владельцам сайтов — получить дополнительный приток пользователей из социальных сетей и популярных порталов (Google, Яндекс, Mail.ru, ВКонтакте, Facebook и др.)

## Установка


1) Скопировать все файлы и папки находящиеся в папке /upload в архиве.
2) Импортировать продукт product-ulogin.xml, находящийся в корне архива, в vBulletin с помощью администраторской панели.
3) Правка шаблона с помощью администраторской панели.

   3.1. Для vBulletin 4.x.x:

      - **Основная панель uLogin**

      Шаблон:		header
      
      Найти:

        <vb:else />
            <ul class="nouser">
            <vb:if condition="$show['registerbutton']">
                <li><a href="register.php{vb:raw session.sessionurl_q}" rel="nofollow">{vb:rawphrase register}</a></li>
            </vb:if>
                <li><a rel="help" href="faq.php{vb:raw session.sessionurl_q}">{vb:rawphrase help}</a></li>
                <li>

      Ниже добавить:

        {vb:raw template_hook.ulogin}

      - **Панель uLogin для подключения аккаунтов**

      Шаблон:		modifyprofile
      
      Найти:

        <div class="section">
            {vb:raw customfields.regular}

      Ниже добавить:

        {vb:raw template_hook.ulogin} 

      3.2. Для vBulletin 3.x.x:

      - **Основная панель uLogin**

      Шаблон:		navbar
      
      Найти:
    
        <tr>
            <td class="smallfont"><label for="navbar_password">$vbphrase[password]</label></td>
            <td><input type="password" class="bginput" style="font-size: 11px" name="vb_login_password" id="navbar_password" size="10" tabindex="102" /></td>
            <td><input type="submit" class="button" value="$vbphrase[log_in]" tabindex="104" title="$vbphrase[enter_username_to_login_or_register]" accesskey="s" /></td>
        </tr>
    
      Ниже добавить:
    
        <tr>
            <td colspan="3">$template_hook[ulogin]</td>
        </tr>

      - **Панель uLogin для подключения аккаунтов**

      Шаблон		modifyprofile
    
      Найти:

        <div class="panel">
        <div style="width:$stylevar[formwidth_usercp]" align="$stylevar[left]">
        
        $customfields[regular]
        <!-- end if custom fields -->

      Ниже добавить:

        $template_hook[ulogin]

    
4) По необходимости изменить настройки продукта средствами администраторской панели.

Более детальную информацию смотрите на сайте https://ulogin.ru/help.php

## Изменения

####1.9
- совместимость с версией 4.2.3: хук global_start заменили на актуальный global_bootstrap_init_complete
- исправлена проблема с отправкой email при регистрации пользователей
####1.8
- HTML-код виджета приведен к актуальному виду;
- Дублирующиейся email-адреса: теперь не создаются повторы адреса вида "email+nickname@gmail.com".
  Вместо этого:
  - если почта подтверждена, пользователя логинит в существующий аккаунт (если в настройках включена эта функция)
  - если не подтверждена, пользователю выводится предложение привязать новую соцсеть к существующему аккаунту (путем подтверждения email-адреса);
- В соответствии с последними стандартами плагинов uLogin подключена функция generateNickname,
  благодаря чему юзернеймы теперь генерируются красивые, осмысленные и уникальные (используя никнейм, имя, фамилию, почту или дату рождения, полученные от соцсети);
####1.4
- Фото из социальной сети добавляется как аватар профиля;
- Изменен способ инициализации виджета в шаблонных хуках;
- Изменен способ получения данных пользователя через токен(curl или file_get_contents);
- Добавлена возможность подключения(связывания) пользовательских профилей uLogin для единой авторизации. Опции подключения:
  - Просмотр списка подключенных профилей и подключение/отключение профилей через панель uLogin в UserCP->Edit Your Details->uLogin;

  - Опция "Автоматическое подключение профилей uLogin" - переключаемая опция в административной панели (по умолчанию включена).

    Подключает пользовательский профиль uLogin к существующему профилю при совпадении подтвержденного email(verified_email).
    Не рекомендуется использовать совместно с опцией "Перенос пользователя при привязке vBulletin", может привести к удалению аккаунта;

  - Опция "Перенос пользователя vBulletin при привязке" - переключаемая опция в административной панели (по умолчанию отключена).
    Переносит альбомы, посты, профили uLogin и т.д. пользовательского профиля vBulletin на текущий пользовательский профиль vB при переподключении связанного профиля uLogin.
    Удаляет старый пользовательский профиль vB.  Не рекомендуется использовать совместно с опцией "Автоматическое подключение профилей uLogin".

  - Опция "Подтверждение email" переключаемая опция в административной панели (по умолчанию отключена).
    Добавляет параметр verify=1 в виджет. Используется для проверки принадлежности к указанному почтовому адресу. Проверка осуществляется один раз.
    Подробнее про параметр verify можно прочесть тут http://ulogin.ru/help.php#faq.
####1.3
- Изменена генерация имени пользователя и email;
- Фото из социальной сети добавляется как фото профиля;
- Добавлена возможность изменить тип отображаемого виджета;

     
  